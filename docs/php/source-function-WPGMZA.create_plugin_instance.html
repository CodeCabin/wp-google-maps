<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex">

	<title>File class.plugin.php</title>

	<link rel="stylesheet" href="resources/style.css?c2f33731c1948fbed7c333554678bfa68d4817da">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
				<h3>Namespaces</h3>
			<ul>
				<li>
					<a href="namespace-None.html">
						None					</a>

						</li>
				<li>
					<a href="namespace-WPGMZA.html">
						WPGMZA<span></span>
					</a>

						<ul>
				<li>
					<a href="namespace-WPGMZA.Integration.html">
						Integration					</a>

						</li>
				<li>
					<a href="namespace-WPGMZA.Selector.html">
						Selector					</a>

						</li>
							</ul></li>
			</ul>
		</div>

		<hr>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-WPGMZA.AutoLoader.html">WPGMZA\AutoLoader</a></li>
				<li><a href="class-WPGMZA.Crud.html">WPGMZA\Crud</a></li>
				<li><a href="class-WPGMZA.DOMDocument.html">WPGMZA\DOMDocument</a></li>
				<li><a href="class-WPGMZA.DOMElement.html">WPGMZA\DOMElement</a></li>
				<li><a href="class-WPGMZA.Factory.html">WPGMZA\Factory</a></li>
				<li><a href="class-WPGMZA.GDPRCompliance.html">WPGMZA\GDPRCompliance</a></li>
				<li><a href="class-WPGMZA.GoogleGeocoder.html">WPGMZA\GoogleGeocoder</a></li>
				<li><a href="class-WPGMZA.GoogleMap.html">WPGMZA\GoogleMap</a></li>
				<li><a href="class-WPGMZA.GoogleMapsAPILoader.html" class="deprecated">WPGMZA\GoogleMapsAPILoader</a></li>
				<li><a href="class-WPGMZA.GoogleMapsLoader.html" class="deprecated">WPGMZA\GoogleMapsLoader</a></li>
				<li><a href="class-WPGMZA.Integration.Gutenberg.html">WPGMZA\Integration\Gutenberg</a></li>
				<li><a href="class-WPGMZA.Integration.WPMigrateDB.html">WPGMZA\Integration\WPMigrateDB</a></li>
				<li><a href="class-WPGMZA.LatLng.html">WPGMZA\LatLng</a></li>
				<li><a href="class-WPGMZA.Map.html">WPGMZA\Map</a></li>
				<li><a href="class-WPGMZA.MapsEngineDialog.html">WPGMZA\MapsEngineDialog</a></li>
				<li><a href="class-WPGMZA.Marker.html">WPGMZA\Marker</a></li>
				<li><a href="class-WPGMZA.ModalDialog.html">WPGMZA\ModalDialog</a></li>
				<li><a href="class-WPGMZA.NominatimGeocodeCache.html">WPGMZA\NominatimGeocodeCache</a></li>
				<li><a href="class-WPGMZA.OLLoader.html">WPGMZA\OLLoader</a></li>
				<li><a href="class-WPGMZA.Plugin.html">WPGMZA\Plugin</a></li>
				<li><a href="class-WPGMZA.RestAPI.html">WPGMZA\RestAPI</a></li>
				<li><a href="class-WPGMZA.ScriptLoader.html">WPGMZA\ScriptLoader</a></li>
				<li><a href="class-WPGMZA.Selector.AttributeSelector.html">WPGMZA\Selector\AttributeSelector</a></li>
				<li><a href="class-WPGMZA.Selector.Parser.html">WPGMZA\Selector\Parser</a></li>
				<li><a href="class-WPGMZA.Selector.PseudoSelector.html">WPGMZA\Selector\PseudoSelector</a></li>
				<li><a href="class-WPGMZA.Selector.Selector.html">WPGMZA\Selector\Selector</a></li>
				<li><a href="class-WPGMZA.Selector.Token.html">WPGMZA\Selector\Token</a></li>
				<li><a href="class-WPGMZA.Selector.Tokenizer.html">WPGMZA\Selector\Tokenizer</a></li>
				<li><a href="class-WPGMZA.Selector.TokenStream.html">WPGMZA\Selector\TokenStream</a></li>
				<li><a href="class-WPGMZA.Selector.XPathConverter.html">WPGMZA\Selector\XPathConverter</a></li>
				<li><a href="class-WPGMZA.Strings.html">WPGMZA\Strings</a></li>
			</ul>



			<h3>Exceptions</h3>
			<ul>
				<li><a href="class-WPGMZA.Selector.ConvertException.html">WPGMZA\Selector\ConvertException</a></li>
				<li><a href="class-WPGMZA.Selector.ParseException.html">WPGMZA\Selector\ParseException</a></li>
			</ul>


			<h3>Functions</h3>
			<ul>
				<li><a href="function-WPGMZA.create_marker_instance_delegate.html">WPGMZA\create_marker_instance_delegate</a></li>
				<li><a href="function-WPGMZA.create_plugin_instance.html" class="deprecated">WPGMZA\create_plugin_instance</a></li>
				<li><a href="function-WPGMZA.query_nominatim_cache.html" class="deprecated">WPGMZA\query_nominatim_cache</a></li>
				<li><a href="function-WPGMZA.Selector.trace.html">WPGMZA\Selector\trace</a></li>
				<li><a href="function-WPGMZA.store_nominatim_cache.html" class="deprecated">WPGMZA\store_nominatim_cache</a></li>
				<li><a href="function-wpgmza_backwards_compat_get_all_circle_data.html">wpgmza_backwards_compat_get_all_circle_data</a></li>
				<li><a href="function-wpgmza_backwards_compat_get_all_rectangle_data.html">wpgmza_backwards_compat_get_all_rectangle_data</a></li>
				<li><a href="function-wpgmza_check_admin_head_backwards_compat_v6.html">wpgmza_check_admin_head_backwards_compat_v6</a></li>
				<li><a href="function-wpgmza_check_map_editor_backwards_compat_v6.html">wpgmza_check_map_editor_backwards_compat_v6</a></li>
				<li><a href="function-wpgmza_check_pro_compat_required_v6.html">wpgmza_check_pro_compat_required_v6</a></li>
				<li><a href="function-wpgmza_check_user_backwards_compat_v6.html">wpgmza_check_user_backwards_compat_v6</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
<span>Namespace</span>			</li>
			<li>
<span>Class</span>			</li>
		</ul>
		<ul>
		</ul>
		<ul>
		</ul>
	</div>

<pre class="numbers"><code><span class="l"><a href="#1">  1: </a></span><span class="l"><a href="#2">  2: </a></span><span class="l"><a href="#3">  3: </a></span><span class="l"><a href="#4">  4: </a></span><span class="l"><a href="#5">  5: </a></span></span><span class="l"><a href="#6">  6: </a></span></span><span class="l"><a href="#7">  7: </a></span></span><span class="l"><a href="#8">  8: </a></span></span><span class="l"><a href="#9">  9: </a></span></span><span class="l"><a href="#10"> 10: </a></span></span><span class="l"><a href="#11"> 11: </a></span><span class="l"><a href="#12"> 12: </a></span><span class="l"><a href="#13"> 13: </a></span><span class="l"><a href="#14"> 14: </a></span><span class="l"><a href="#15"> 15: </a></span><span class="l"><a href="#16"> 16: </a></span><span class="l"><a href="#17"> 17: </a></span><span class="l"><a href="#18"> 18: </a></span><span class="l"><a href="#19"> 19: </a></span><span class="l"><a href="#20"> 20: </a></span><span class="l"><a href="#21"> 21: </a></span><span class="l"><a href="#22"> 22: </a></span><span class="l"><a href="#23"> 23: </a></span><span class="l"><a href="#24"> 24: </a></span><span class="l"><a href="#25"> 25: </a></span><span class="l"><a href="#26"> 26: </a></span><span class="l"><a href="#27"> 27: </a></span><span class="l"><a href="#28"> 28: </a></span><span class="l"><a href="#29"> 29: </a></span><span class="l"><a href="#30"> 30: </a></span></span><span class="l"><a href="#31"> 31: </a></span></span><span class="l"><a href="#32"> 32: </a></span></span><span class="l"><a href="#33"> 33: </a></span><span class="l"><a href="#34"> 34: </a></span><span class="l"><a href="#35"> 35: </a></span><span class="l"><a href="#36"> 36: </a></span></span><span class="l"><a href="#37"> 37: </a></span></span><span class="l"><a href="#38"> 38: </a></span><span class="l"><a href="#39"> 39: </a></span><span class="l"><a href="#40"> 40: </a></span><span class="l"><a href="#41"> 41: </a></span></span><span class="l"><a href="#42"> 42: </a></span></span><span class="l"><a href="#43"> 43: </a></span><span class="l"><a href="#44"> 44: </a></span><span class="l"><a href="#45"> 45: </a></span><span class="l"><a href="#46"> 46: </a></span><span class="l"><a href="#47"> 47: </a></span><span class="l"><a href="#48"> 48: </a></span><span class="l"><a href="#49"> 49: </a></span><span class="l"><a href="#50"> 50: </a></span></span><span class="l"><a href="#51"> 51: </a></span></span><span class="l"><a href="#52"> 52: </a></span><span class="l"><a href="#53"> 53: </a></span><span class="l"><a href="#54"> 54: </a></span><span class="l"><a href="#55"> 55: </a></span><span class="l"><a href="#56"> 56: </a></span><span class="l"><a href="#57"> 57: </a></span><span class="l"><a href="#58"> 58: </a></span><span class="l"><a href="#59"> 59: </a></span><span class="l"><a href="#60"> 60: </a></span><span class="l"><a href="#61"> 61: </a></span><span class="l"><a href="#62"> 62: </a></span><span class="l"><a href="#63"> 63: </a></span><span class="l"><a href="#64"> 64: </a></span><span class="l"><a href="#65"> 65: </a></span><span class="l"><a href="#66"> 66: </a></span><span class="l"><a href="#67"> 67: </a></span><span class="l"><a href="#68"> 68: </a></span><span class="l"><a href="#69"> 69: </a></span><span class="l"><a href="#70"> 70: </a></span><span class="l"><a href="#71"> 71: </a></span><span class="l"><a href="#72"> 72: </a></span><span class="l"><a href="#73"> 73: </a></span><span class="l"><a href="#74"> 74: </a></span><span class="l"><a href="#75"> 75: </a></span><span class="l"><a href="#76"> 76: </a></span><span class="l"><a href="#77"> 77: </a></span><span class="l"><a href="#78"> 78: </a></span><span class="l"><a href="#79"> 79: </a></span><span class="l"><a href="#80"> 80: </a></span><span class="l"><a href="#81"> 81: </a></span><span class="l"><a href="#82"> 82: </a></span><span class="l"><a href="#83"> 83: </a></span><span class="l"><a href="#84"> 84: </a></span><span class="l"><a href="#85"> 85: </a></span><span class="l"><a href="#86"> 86: </a></span><span class="l"><a href="#87"> 87: </a></span><span class="l"><a href="#88"> 88: </a></span><span class="l"><a href="#89"> 89: </a></span><span class="l"><a href="#90"> 90: </a></span><span class="l"><a href="#91"> 91: </a></span><span class="l"><a href="#92"> 92: </a></span><span class="l"><a href="#93"> 93: </a></span><span class="l"><a href="#94"> 94: </a></span><span class="l"><a href="#95"> 95: </a></span><span class="l"><a href="#96"> 96: </a></span><span class="l"><a href="#97"> 97: </a></span><span class="l"><a href="#98"> 98: </a></span><span class="l"><a href="#99"> 99: </a></span><span class="l"><a href="#100">100: </a></span><span class="l"><a href="#101">101: </a></span><span class="l"><a href="#102">102: </a></span><span class="l"><a href="#103">103: </a></span><span class="l"><a href="#104">104: </a></span><span class="l"><a href="#105">105: </a></span><span class="l"><a href="#106">106: </a></span><span class="l"><a href="#107">107: </a></span><span class="l"><a href="#108">108: </a></span><span class="l"><a href="#109">109: </a></span><span class="l"><a href="#110">110: </a></span><span class="l"><a href="#111">111: </a></span><span class="l"><a href="#112">112: </a></span><span class="l"><a href="#113">113: </a></span><span class="l"><a href="#114">114: </a></span></span><span class="l"><a href="#115">115: </a></span></span><span class="l"><a href="#116">116: </a></span><span class="l"><a href="#117">117: </a></span><span class="l"><a href="#118">118: </a></span><span class="l"><a href="#119">119: </a></span><span class="l"><a href="#120">120: </a></span><span class="l"><a href="#121">121: </a></span><span class="l"><a href="#122">122: </a></span><span class="l"><a href="#123">123: </a></span><span class="l"><a href="#124">124: </a></span><span class="l"><a href="#125">125: </a></span><span class="l"><a href="#126">126: </a></span><span class="l"><a href="#127">127: </a></span><span class="l"><a href="#128">128: </a></span><span class="l"><a href="#129">129: </a></span><span class="l"><a href="#130">130: </a></span><span class="l"><a href="#131">131: </a></span><span class="l"><a href="#132">132: </a></span><span class="l"><a href="#133">133: </a></span><span class="l"><a href="#134">134: </a></span><span class="l"><a href="#135">135: </a></span><span class="l"><a href="#136">136: </a></span><span class="l"><a href="#137">137: </a></span><span class="l"><a href="#138">138: </a></span><span class="l"><a href="#139">139: </a></span><span class="l"><a href="#140">140: </a></span></span><span class="l"><a href="#141">141: </a></span></span><span class="l"><a href="#142">142: </a></span></span><span class="l"><a href="#143">143: </a></span></span><span class="l"><a href="#144">144: </a></span></span><span class="l"><a href="#145">145: </a></span></span><span class="l"><a href="#146">146: </a></span></span><span class="l"><a href="#147">147: </a></span><span class="l"><a href="#148">148: </a></span><span class="l"><a href="#149">149: </a></span><span class="l"><a href="#150">150: </a></span><span class="l"><a href="#151">151: </a></span><span class="l"><a href="#152">152: </a></span><span class="l"><a href="#153">153: </a></span><span class="l"><a href="#154">154: </a></span><span class="l"><a href="#155">155: </a></span><span class="l"><a href="#156">156: </a></span><span class="l"><a href="#157">157: </a></span><span class="l"><a href="#158">158: </a></span><span class="l"><a href="#159">159: </a></span><span class="l"><a href="#160">160: </a></span><span class="l"><a href="#161">161: </a></span><span class="l"><a href="#162">162: </a></span><span class="l"><a href="#163">163: </a></span><span class="l"><a href="#164">164: </a></span><span class="l"><a href="#165">165: </a></span><span class="l"><a href="#166">166: </a></span><span class="l"><a href="#167">167: </a></span><span class="l"><a href="#168">168: </a></span><span class="l"><a href="#169">169: </a></span><span class="l"><a href="#170">170: </a></span><span class="l"><a href="#171">171: </a></span><span class="l"><a href="#172">172: </a></span><span class="l"><a href="#173">173: </a></span></span><span class="l"><a href="#174">174: </a></span></span><span class="l"><a href="#175">175: </a></span></span><span class="l"><a href="#176">176: </a></span><span class="l"><a href="#177">177: </a></span><span class="l"><a href="#178">178: </a></span><span class="l"><a href="#179">179: </a></span><span class="l"><a href="#180">180: </a></span><span class="l"><a href="#181">181: </a></span><span class="l"><a href="#182">182: </a></span><span class="l"><a href="#183">183: </a></span><span class="l"><a href="#184">184: </a></span><span class="l"><a href="#185">185: </a></span><span class="l"><a href="#186">186: </a></span><span class="l"><a href="#187">187: </a></span><span class="l"><a href="#188">188: </a></span><span class="l"><a href="#189">189: </a></span></span><span class="l"><a href="#190">190: </a></span></span><span class="l"><a href="#191">191: </a></span></span><span class="l"><a href="#192">192: </a></span></span><span class="l"><a href="#193">193: </a></span></span><span class="l"><a href="#194">194: </a></span><span class="l"><a href="#195">195: </a></span><span class="l"><a href="#196">196: </a></span><span class="l"><a href="#197">197: </a></span><span class="l"><a href="#198">198: </a></span><span class="l"><a href="#199">199: </a></span><span class="l"><a href="#200">200: </a></span><span class="l"><a href="#201">201: </a></span><span class="l"><a href="#202">202: </a></span><span class="l"><a href="#203">203: </a></span><span class="l"><a href="#204">204: </a></span><span class="l"><a href="#205">205: </a></span><span class="l"><a href="#206">206: </a></span><span class="l"><a href="#207">207: </a></span><span class="l"><a href="#208">208: </a></span><span class="l"><a href="#209">209: </a></span><span class="l"><a href="#210">210: </a></span><span class="l"><a href="#211">211: </a></span><span class="l"><a href="#212">212: </a></span><span class="l"><a href="#213">213: </a></span><span class="l"><a href="#214">214: </a></span><span class="l"><a href="#215">215: </a></span><span class="l"><a href="#216">216: </a></span><span class="l"><a href="#217">217: </a></span><span class="l"><a href="#218">218: </a></span><span class="l"><a href="#219">219: </a></span><span class="l"><a href="#220">220: </a></span><span class="l"><a href="#221">221: </a></span><span class="l"><a href="#222">222: </a></span><span class="l"><a href="#223">223: </a></span><span class="l"><a href="#224">224: </a></span><span class="l"><a href="#225">225: </a></span><span class="l"><a href="#226">226: </a></span><span class="l"><a href="#227">227: </a></span><span class="l"><a href="#228">228: </a></span><span class="l"><a href="#229">229: </a></span><span class="l"><a href="#230">230: </a></span><span class="l"><a href="#231">231: </a></span><span class="l"><a href="#232">232: </a></span><span class="l"><a href="#233">233: </a></span></span><span class="l"><a href="#234">234: </a></span></span><span class="l"><a href="#235">235: </a></span></span><span class="l"><a href="#236">236: </a></span><span class="l"><a href="#237">237: </a></span><span class="l"><a href="#238">238: </a></span><span class="l"><a href="#239">239: </a></span><span class="l"><a href="#240">240: </a></span><span class="l"><a href="#241">241: </a></span><span class="l"><a href="#242">242: </a></span><span class="l"><a href="#243">243: </a></span><span class="l"><a href="#244">244: </a></span><span class="l"><a href="#245">245: </a></span><span class="l"><a href="#246">246: </a></span><span class="l"><a href="#247">247: </a></span><span class="l"><a href="#248">248: </a></span><span class="l"><a href="#249">249: </a></span><span class="l"><a href="#250">250: </a></span><span class="l"><a href="#251">251: </a></span><span class="l"><a href="#252">252: </a></span><span class="l"><a href="#253">253: </a></span><span class="l"><a href="#254">254: </a></span><span class="l"><a href="#255">255: </a></span><span class="l"><a href="#256">256: </a></span><span class="l"><a href="#257">257: </a></span><span class="l"><a href="#258">258: </a></span><span class="l"><a href="#259">259: </a></span><span class="l"><a href="#260">260: </a></span><span class="l"><a href="#261">261: </a></span><span class="l"><a href="#262">262: </a></span><span class="l"><a href="#263">263: </a></span><span class="l"><a href="#264">264: </a></span><span class="l"><a href="#265">265: </a></span><span class="l"><a href="#266">266: </a></span><span class="l"><a href="#267">267: </a></span><span class="l"><a href="#268">268: </a></span><span class="l"><a href="#269">269: </a></span><span class="l"><a href="#270">270: </a></span><span class="l"><a href="#271">271: </a></span><span class="l"><a href="#272">272: </a></span><span class="l"><a href="#273">273: </a></span><span class="l"><a href="#274">274: </a></span><span class="l"><a href="#275">275: </a></span></span><span class="l"><a href="#276">276: </a></span></span><span class="l"><a href="#277">277: </a></span></span><span class="l"><a href="#278">278: </a></span><span class="l"><a href="#279">279: </a></span><span class="l"><a href="#280">280: </a></span><span class="l"><a href="#281">281: </a></span><span class="l"><a href="#282">282: </a></span><span class="l"><a href="#283">283: </a></span><span class="l"><a href="#284">284: </a></span></span><span class="l"><a href="#285">285: </a></span></span><span class="l"><a href="#286">286: </a></span></span><span class="l"><a href="#287">287: </a></span><span class="l"><a href="#288">288: </a></span><span class="l"><a href="#289">289: </a></span><span class="l"><a href="#290">290: </a></span><span class="l"><a href="#291">291: </a></span><span class="l"><a href="#292">292: </a></span><span class="l"><a href="#293">293: </a></span></span><span class="l"><a href="#294">294: </a></span></span><span class="l"><a href="#295">295: </a></span></span><span class="l"><a href="#296">296: </a></span><span class="l"><a href="#297">297: </a></span><span class="l"><a href="#298">298: </a></span><span class="l"><a href="#299">299: </a></span><span class="l"><a href="#300">300: </a></span><span class="l"><a href="#301">301: </a></span><span class="l"><a href="#302">302: </a></span></span><span class="l"><a href="#303">303: </a></span></span><span class="l"><a href="#304">304: </a></span></span><span class="l"><a href="#305">305: </a></span><span class="l"><a href="#306">306: </a></span><span class="l"><a href="#307">307: </a></span><span class="l"><a href="#308">308: </a></span><span class="l"><a href="#309">309: </a></span><span class="l"><a href="#310">310: </a></span><span class="l"><a href="#311">311: </a></span><span class="l"><a href="#312">312: </a></span><span class="l"><a href="#313">313: </a></span><span class="l"><a href="#314">314: </a></span><span class="l"><a href="#315">315: </a></span><span class="l"><a href="#316">316: </a></span><span class="l"><a href="#317">317: </a></span><span class="l"><a href="#318">318: </a></span></span><span class="l"><a href="#319">319: </a></span></span><span class="l"><a href="#320">320: </a></span></span><span class="l"><a href="#321">321: </a></span></span><span class="l"><a href="#322">322: </a></span></span><span class="l"><a href="#323">323: </a></span><span class="l"><a href="#324">324: </a></span><span class="l"><a href="#325">325: </a></span><span class="l"><a href="#326">326: </a></span><span class="l"><a href="#327">327: </a></span><span class="l"><a href="#328">328: </a></span><span class="l"><a href="#329">329: </a></span><span class="l"><a href="#330">330: </a></span><span class="l"><a href="#331">331: </a></span><span class="l"><a href="#332">332: </a></span><span class="l"><a href="#333">333: </a></span></span><span class="l"><a href="#334">334: </a></span></span><span class="l"><a href="#335">335: </a></span></span><span class="l"><a href="#336">336: </a></span><span class="l"><a href="#337">337: </a></span><span class="l"><a href="#338">338: </a></span><span class="l"><a href="#339">339: </a></span><span class="l"><a href="#340">340: </a></span><span class="l"><a href="#341">341: </a></span><span class="l"><a href="#342">342: </a></span><span class="l"><a href="#343">343: </a></span><span class="l"><a href="#344">344: </a></span><span class="l"><a href="#345">345: </a></span><span class="l"><a href="#346">346: </a></span><span class="l"><a href="#347">347: </a></span><span class="l"><a href="#348">348: </a></span><span class="l"><a href="#349">349: </a></span><span class="l"><a href="#350">350: </a></span></code></pre>
<pre class="code"><code><span id="1" class="l"><span class="xlang">&lt;?php</span>
</span><span id="2" class="l">
</span><span id="3" class="l"><span class="php-keyword1">namespace</span> WPGMZA;
</span><span id="4" class="l">
</span><span id="5" class="l"><span class="php-comment">/**
</span></span><span id="6" class="l"><span class="php-comment"> * This class represents the plugin itself. Broadly, this module handles practically all interaction with the platform (WP), loading assets as needed, and hooking into the platforms interface to provide menus etc.
</span></span><span id="7" class="l"><span class="php-comment"> *
</span></span><span id="8" class="l"><span class="php-comment"> * It also provides a number of helpful utility functions.
</span></span><span id="9" class="l"><span class="php-comment"> * @property-read string $spatialFunctionPrefix MySQL versions 8 and above prefix all spatial functions with ST_, previous versions do not. This property will be ST_ where necessary, and an empty string where not. You should use this with all DB calls that make use of spaital functions.
</span></span><span id="10" class="l"><span class="php-comment"> * @property-read string $gdprCompliance An instance of the GDPRCompliance class.
</span></span><span id="11" class="l"><span class="php-comment"> */</span>
</span><span id="12" class="l"><span class="php-keyword1">class</span> Plugin
</span><span id="13" class="l">{
</span><span id="14" class="l">    <span class="php-keyword1">const</span> PAGE_MAP_LIST         = <span class="php-quote">&quot;map-list&quot;</span>;
</span><span id="15" class="l">    <span class="php-keyword1">const</span> PAGE_MAP_EDIT         = <span class="php-quote">&quot;map-edit&quot;</span>;
</span><span id="16" class="l">    <span class="php-keyword1">const</span> PAGE_SETTINGS         = <span class="php-quote">&quot;map-settings&quot;</span>;
</span><span id="17" class="l">    <span class="php-keyword1">const</span> PAGE_SUPPORT          = <span class="php-quote">&quot;map-support&quot;</span>;
</span><span id="18" class="l">    
</span><span id="19" class="l">    <span class="php-keyword1">const</span> PAGE_CATEGORIES       = <span class="php-quote">&quot;categories&quot;</span>;
</span><span id="20" class="l">    <span class="php-keyword1">const</span> PAGE_ADVANCED         = <span class="php-quote">&quot;advanced&quot;</span>;
</span><span id="21" class="l">    <span class="php-keyword1">const</span> PAGE_CUSTOM_FIELDS    = <span class="php-quote">&quot;custom-fields&quot;</span>;
</span><span id="22" class="l">    
</span><span id="23" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">static</span> <span class="php-var">$enqueueScriptActions</span> = <span class="php-keyword1">array</span>(
</span><span id="24" class="l">        <span class="php-quote">'wp_enqueue_scripts'</span>,
</span><span id="25" class="l">        <span class="php-quote">'admin_enqueue_scripts'</span>,
</span><span id="26" class="l">        <span class="php-quote">'enqueue_block_assets'</span>
</span><span id="27" class="l">    );
</span><span id="28" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">static</span> <span class="php-var">$enqueueScriptsFired</span> = <span class="php-keyword1">false</span>;
</span><span id="29" class="l">    
</span><span id="30" class="l">    <span class="php-comment">/** 
</span></span><span id="31" class="l"><span class="php-comment">     * @var array The plugins global settings. Please note this will be dropped and handed over to the GlobalSettings module in 7.11.00. This should not effect interaction with this property - you can continue to access this as an array safely.
</span></span><span id="32" class="l"><span class="php-comment">     * @deprecated Will be read-only and an instance of GLobalSettings as of 7.11.00
</span></span><span id="33" class="l"><span class="php-comment">     */</span>
</span><span id="34" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$settings</span>;
</span><span id="35" class="l">    
</span><span id="36" class="l">    <span class="php-comment">/**
</span></span><span id="37" class="l"><span class="php-comment">     * @var ScriptLoader An instance of ScriptLoader, used internally.
</span></span><span id="38" class="l"><span class="php-comment">     */</span>
</span><span id="39" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$scriptLoader</span>;
</span><span id="40" class="l">    
</span><span id="41" class="l">    <span class="php-comment">/**
</span></span><span id="42" class="l"><span class="php-comment">     * @var RestAPI An instance of RestAPI, used internally.
</span></span><span id="43" class="l"><span class="php-comment">     */</span>
</span><span id="44" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$restAPI</span>;
</span><span id="45" class="l">    
</span><span id="46" class="l">    <span class="php-keyword1">private</span> <span class="php-var">$mysqlVersion</span> = <span class="php-keyword1">null</span>;
</span><span id="47" class="l">    <span class="php-keyword1">private</span> <span class="php-var">$cachedVersion</span> = <span class="php-keyword1">null</span>;
</span><span id="48" class="l">    <span class="php-keyword1">private</span> <span class="php-var">$legacySettings</span>;
</span><span id="49" class="l">    
</span><span id="50" class="l">    <span class="php-comment">/**
</span></span><span id="51" class="l"><span class="php-comment">     * Constructor. Called when plugins_loaded fires.
</span></span><span id="52" class="l"><span class="php-comment">     */</span>
</span><span id="53" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> __construct()
</span><span id="54" class="l">    {
</span><span id="55" class="l">        <span class="php-keyword1">global</span> <span class="php-var">$wpdb</span>;
</span><span id="56" class="l">        
</span><span id="57" class="l">        add_filter(<span class="php-quote">'load_textdomain_mofile'</span>, <span class="php-keyword1">array</span>(<span class="php-var">$this</span>, <span class="php-quote">'onLoadTextDomainMOFile'</span>), <span class="php-num">10</span>, <span class="php-num">2</span>);
</span><span id="58" class="l">        
</span><span id="59" class="l">        <span class="php-var">$this</span>-&gt;mysqlVersion = <span class="php-var">$wpdb</span>-&gt;get_var(<span class="php-quote">'SELECT VERSION()'</span>);
</span><span id="60" class="l">        
</span><span id="61" class="l">        <span class="php-var">$this</span>-&gt;legacySettings = get_option(<span class="php-quote">'WPGMZA_OTHER_SETTINGS'</span>);
</span><span id="62" class="l">        <span class="php-keyword1">if</span>(!<span class="php-var">$this</span>-&gt;legacySettings)
</span><span id="63" class="l">            <span class="php-var">$this</span>-&gt;legacySettings = <span class="php-keyword1">array</span>();
</span><span id="64" class="l">        
</span><span id="65" class="l">        <span class="php-var">$settings</span> = <span class="php-var">$this</span>-&gt;getDefaultSettings();
</span><span id="66" class="l">        
</span><span id="67" class="l">        <span class="php-comment">// $temp = GlobalSettings::createInstance();</span>
</span><span id="68" class="l">        
</span><span id="69" class="l">        <span class="php-comment">// Legacy compatibility</span>
</span><span id="70" class="l">        <span class="php-keyword1">global</span> <span class="php-var">$wpgmza_pro_version</span>;
</span><span id="71" class="l">        
</span><span id="72" class="l">        <span class="php-comment">// TODO: This should be in default settings, this code is duplicaetd</span>
</span><span id="73" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$wpgmza_pro_version</span>) &amp;&amp; <span class="php-keyword2">version_compare</span>(<span class="php-keyword2">trim</span>(<span class="php-var">$wpgmza_pro_version</span>), <span class="php-quote">'7.10.00'</span>, <span class="php-quote">'&lt;'</span>))
</span><span id="74" class="l">        {
</span><span id="75" class="l">            <span class="php-var">$self</span> = <span class="php-var">$this</span>;
</span><span id="76" class="l">            
</span><span id="77" class="l">            <span class="php-var">$settings</span>[<span class="php-quote">'wpgmza_maps_engine'</span>] = <span class="php-var">$settings</span>[<span class="php-quote">'engine'</span>] = <span class="php-quote">'google-maps'</span>;
</span><span id="78" class="l">            
</span><span id="79" class="l">            add_filter(<span class="php-quote">'wpgooglemaps_filter_map_div_output'</span>, <span class="php-keyword1">function</span>(<span class="php-var">$output</span>) <span class="php-keyword1">use</span> (<span class="php-var">$self</span>) {
</span><span id="80" class="l">                
</span><span id="81" class="l">                <span class="php-var">$loader</span> = <span class="php-keyword1">new</span> GoogleMapsAPILoader();
</span><span id="82" class="l">                <span class="php-var">$loader</span>-&gt;registerGoogleMaps();
</span><span id="83" class="l">                <span class="php-var">$loader</span>-&gt;enqueueGoogleMaps();
</span><span id="84" class="l">                
</span><span id="85" class="l">                <span class="php-var">$self</span>-&gt;loadScripts();
</span><span id="86" class="l">                
</span><span id="87" class="l">                <span class="php-keyword1">return</span> <span class="php-var">$output</span>;
</span><span id="88" class="l">                
</span><span id="89" class="l">            });
</span><span id="90" class="l">        }
</span><span id="91" class="l">        
</span><span id="92" class="l">        <span class="php-var">$this</span>-&gt;settings = (object)<span class="php-keyword2">array_merge</span>(<span class="php-var">$this</span>-&gt;legacySettings, <span class="php-var">$settings</span>);
</span><span id="93" class="l">        
</span><span id="94" class="l">        <span class="php-var">$this</span>-&gt;restAPI = <span class="php-keyword1">new</span> RestAPI();
</span><span id="95" class="l">        <span class="php-var">$this</span>-&gt;gutenbergIntegration = Integration\Gutenberg::createInstance();
</span><span id="96" class="l">        
</span><span id="97" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;settings-&gt;wpgmza_maps_engine))
</span><span id="98" class="l">            <span class="php-var">$this</span>-&gt;settings-&gt;engine = <span class="php-var">$this</span>-&gt;settings-&gt;wpgmza_maps_engine;
</span><span id="99" class="l">        
</span><span id="100" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$_COOKIE</span>[<span class="php-quote">'wpgmza-developer-mode'</span>]))
</span><span id="101" class="l">            <span class="php-var">$this</span>-&gt;settings-&gt;developer_mode = <span class="php-keyword1">true</span>;
</span><span id="102" class="l">        
</span><span id="103" class="l">        <span class="php-keyword1">foreach</span>(Plugin::<span class="php-var">$enqueueScriptActions</span> <span class="php-keyword1">as</span> <span class="php-var">$action</span>)
</span><span id="104" class="l">        {
</span><span id="105" class="l">            add_action(<span class="php-var">$action</span>, <span class="php-keyword1">function</span>() <span class="php-keyword1">use</span> (<span class="php-var">$action</span>) {
</span><span id="106" class="l">                Plugin::<span class="php-var">$enqueueScriptsFired</span> = <span class="php-keyword1">true</span>;
</span><span id="107" class="l">            }, <span class="php-num">1</span>);
</span><span id="108" class="l">        }
</span><span id="109" class="l">            
</span><span id="110" class="l">        <span class="php-keyword1">if</span>(<span class="php-var">$this</span>-&gt;settings-&gt;engine == <span class="php-quote">'open-layers'</span>)
</span><span id="111" class="l">            <span class="php-keyword1">require_once</span>(plugin_dir_path(__FILE__) . <span class="php-quote">'open-layers/class.nominatim-geocode-cache.php'</span>);
</span><span id="112" class="l">    }
</span><span id="113" class="l">    
</span><span id="114" class="l">    <span class="php-comment">/**
</span></span><span id="115" class="l"><span class="php-comment">     * Getter, see property-read above.
</span></span><span id="116" class="l"><span class="php-comment">     */</span>
</span><span id="117" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> __get(<span class="php-var">$name</span>)
</span><span id="118" class="l">    {
</span><span id="119" class="l">        <span class="php-keyword1">switch</span>(<span class="php-var">$name</span>)
</span><span id="120" class="l">        {
</span><span id="121" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">&quot;spatialFunctionPrefix&quot;</span>:
</span><span id="122" class="l">                <span class="php-var">$result</span> = <span class="php-quote">''</span>;
</span><span id="123" class="l">                
</span><span id="124" class="l">                <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;mysqlVersion) &amp;&amp; <span class="php-keyword2">preg_match</span>(<span class="php-quote">'/^\d+/'</span>, <span class="php-var">$this</span>-&gt;mysqlVersion, <span class="php-var">$majorVersion</span>) &amp;&amp; (int)<span class="php-var">$majorVersion</span>[<span class="php-num">0</span>] &gt;= <span class="php-num">8</span>)
</span><span id="125" class="l">                    <span class="php-var">$result</span> = <span class="php-quote">'ST_'</span>;
</span><span id="126" class="l">                
</span><span id="127" class="l">                <span class="php-keyword1">return</span> <span class="php-var">$result</span>;
</span><span id="128" class="l">                <span class="php-keyword1">break</span>;
</span><span id="129" class="l">                
</span><span id="130" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">&quot;gdprCompliance&quot;</span>:
</span><span id="131" class="l">                <span class="php-comment">// Temporary shim</span>
</span><span id="132" class="l">                <span class="php-keyword1">global</span> <span class="php-var">$wpgmzaGDPRCompliance</span>;
</span><span id="133" class="l">                <span class="php-keyword1">return</span> <span class="php-var">$wpgmzaGDPRCompliance</span>;
</span><span id="134" class="l">                <span class="php-keyword1">break</span>;
</span><span id="135" class="l">        }
</span><span id="136" class="l">        
</span><span id="137" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;{<span class="php-var">$name</span>};
</span><span id="138" class="l">    }
</span><span id="139" class="l">    
</span><span id="140" class="l">    <span class="php-comment">/**
</span></span><span id="141" class="l"><span class="php-comment">     * This function will cause the plugin scripts to be loaded. Firstly it will initialize an instance of ScriptLoader. If the developer mode setting is enabled, the scripts will be rebuilt.
</span></span><span id="142" class="l"><span class="php-comment">     *
</span></span><span id="143" class="l"><span class="php-comment">     * If any of the enqueue scripts, admin enqueue scripts or enqueue block assets (Gutenberg) actions have already fired, this function will immediately ask the script loader to enqueue the plugins scripts and styles.
</span></span><span id="144" class="l"><span class="php-comment">     *
</span></span><span id="145" class="l"><span class="php-comment">     * If none of those actions have fired yet, this function will bind to all three and enqueue the scripts at the correct time.
</span></span><span id="146" class="l"><span class="php-comment">     * @return void
</span></span><span id="147" class="l"><span class="php-comment">     */</span>
</span><span id="148" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> loadScripts()
</span><span id="149" class="l">    {
</span><span id="150" class="l">        <span class="php-keyword1">if</span>(!<span class="php-var">$this</span>-&gt;scriptLoader)
</span><span id="151" class="l">            <span class="php-var">$this</span>-&gt;scriptLoader = <span class="php-keyword1">new</span> ScriptLoader(<span class="php-var">$this</span>-&gt;isProVersion());
</span><span id="152" class="l">        
</span><span id="153" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;settings-&gt;developer_mode))
</span><span id="154" class="l">            <span class="php-var">$this</span>-&gt;scriptLoader-&gt;build();
</span><span id="155" class="l">        
</span><span id="156" class="l">        <span class="php-keyword1">if</span>(Plugin::<span class="php-var">$enqueueScriptsFired</span>)
</span><span id="157" class="l">        {
</span><span id="158" class="l">            <span class="php-var">$this</span>-&gt;scriptLoader-&gt;enqueueScripts();
</span><span id="159" class="l">            <span class="php-var">$this</span>-&gt;scriptLoader-&gt;enqueueStyles();
</span><span id="160" class="l">        }
</span><span id="161" class="l">        <span class="php-keyword1">else</span>
</span><span id="162" class="l">        {
</span><span id="163" class="l">            <span class="php-keyword1">foreach</span>(Plugin::<span class="php-var">$enqueueScriptActions</span> <span class="php-keyword1">as</span> <span class="php-var">$action</span>)
</span><span id="164" class="l">            {
</span><span id="165" class="l">                add_action(<span class="php-var">$action</span>, <span class="php-keyword1">function</span>() {
</span><span id="166" class="l">                    <span class="php-var">$this</span>-&gt;scriptLoader-&gt;enqueueScripts();
</span><span id="167" class="l">                    <span class="php-var">$this</span>-&gt;scriptLoader-&gt;enqueueStyles();
</span><span id="168" class="l">                });
</span><span id="169" class="l">            }
</span><span id="170" class="l">        }
</span><span id="171" class="l">    }
</span><span id="172" class="l">    
</span><span id="173" class="l">    <span class="php-comment">/**
</span></span><span id="174" class="l"><span class="php-comment">     * Gets the default settings, passed through the wpgmza_plugin_get_default_settings filter.
</span></span><span id="175" class="l"><span class="php-comment">     * @return array An array of key value pairs with the default plugin settings.
</span></span><span id="176" class="l"><span class="php-comment">     */</span>
</span><span id="177" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> getDefaultSettings()
</span><span id="178" class="l">    {
</span><span id="179" class="l">        <span class="php-var">$defaultEngine</span> = <span class="php-quote">'google-maps'</span>;
</span><span id="180" class="l">        
</span><span id="181" class="l">        <span class="php-keyword1">return</span> apply_filters(<span class="php-quote">'wpgmza_plugin_get_default_settings'</span>, <span class="php-keyword1">array</span>(
</span><span id="182" class="l">            <span class="php-quote">'engine'</span>                =&gt; <span class="php-var">$defaultEngine</span>,
</span><span id="183" class="l">            <span class="php-quote">'google_maps_api_key'</span>   =&gt; get_option(<span class="php-quote">'wpgmza_google_maps_api_key'</span>),
</span><span id="184" class="l">            <span class="php-quote">'default_marker_icon'</span>   =&gt; <span class="php-quote">&quot;//maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png&quot;</span>,
</span><span id="185" class="l">            <span class="php-quote">'developer_mode'</span>        =&gt; !<span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;legacySettings[<span class="php-quote">'developer_mode'</span>])
</span><span id="186" class="l">        ));
</span><span id="187" class="l">    }
</span><span id="188" class="l">    
</span><span id="189" class="l">    <span class="php-comment">/**
</span></span><span id="190" class="l"><span class="php-comment">     * Gets the plugins localized data, that is, the data to be initialized as globals client side (for JavaScript). These variables will be made available as JavaScript globals, through wp_localize_script.
</span></span><span id="191" class="l"><span class="php-comment">     *
</span></span><span id="192" class="l"><span class="php-comment">     * This array is passed through the filter wpgmza_plugin_get_localized_data.
</span></span><span id="193" class="l"><span class="php-comment">     * @return array A key value array of variables to be passed to JavaScript.
</span></span><span id="194" class="l"><span class="php-comment">     */</span>
</span><span id="195" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> getLocalizedData()
</span><span id="196" class="l">    {
</span><span id="197" class="l">        <span class="php-keyword1">global</span> <span class="php-var">$wpgmzaGDPRCompliance</span>;
</span><span id="198" class="l">        
</span><span id="199" class="l">        <span class="php-var">$document</span> = <span class="php-keyword1">new</span> DOMDocument();
</span><span id="200" class="l">        <span class="php-var">$document</span>-&gt;loadPHPFile(plugin_dir_path(__DIR__) . <span class="php-quote">'html/google-maps-api-error-dialog.html.php'</span>);
</span><span id="201" class="l">        <span class="php-var">$googleMapsAPIErrorDialogHTML</span> = <span class="php-var">$document</span>-&gt;saveInnerBody();
</span><span id="202" class="l">        
</span><span id="203" class="l">        <span class="php-var">$strings</span> = <span class="php-keyword1">new</span> Strings();
</span><span id="204" class="l">        
</span><span id="205" class="l">        <span class="php-var">$settings</span> = <span class="php-keyword1">clone</span> <span class="php-var">$this</span>-&gt;settings;
</span><span id="206" class="l">        
</span><span id="207" class="l">        <span class="php-var">$result</span> = apply_filters(<span class="php-quote">'wpgmza_plugin_get_localized_data'</span>, <span class="php-keyword1">array</span>(
</span><span id="208" class="l">            <span class="php-quote">'adminurl'</span>              =&gt; admin_url(),
</span><span id="209" class="l">            <span class="php-quote">'ajaxurl'</span>               =&gt; admin_url(<span class="php-quote">'admin-ajax.php'</span>),
</span><span id="210" class="l">            <span class="php-quote">'resturl'</span>               =&gt; get_rest_url(<span class="php-keyword1">null</span>, <span class="php-quote">'wpgmza/v1'</span>),
</span><span id="211" class="l">            
</span><span id="212" class="l">            <span class="php-quote">'html'</span>                  =&gt; <span class="php-keyword1">array</span>(
</span><span id="213" class="l">                <span class="php-quote">'googleMapsAPIErrorDialog'</span> =&gt; <span class="php-var">$googleMapsAPIErrorDialogHTML</span>
</span><span id="214" class="l">            ),
</span><span id="215" class="l">            
</span><span id="216" class="l">            <span class="php-quote">'settings'</span>              =&gt; <span class="php-var">$settings</span>,
</span><span id="217" class="l">            <span class="php-quote">'currentPage'</span>           =&gt; <span class="php-var">$this</span>-&gt;getCurrentPage(),
</span><span id="218" class="l">            <span class="php-quote">'userCanAdministrator'</span>  =&gt; (current_user_can(<span class="php-quote">'administrator'</span>) ? <span class="php-num">1</span> : <span class="php-num">0</span>),
</span><span id="219" class="l">            
</span><span id="220" class="l">            <span class="php-quote">'localized_strings'</span>     =&gt; <span class="php-var">$strings</span>-&gt;getLocalizedStrings(),
</span><span id="221" class="l">            <span class="php-quote">'api_consent_html'</span>      =&gt; <span class="php-var">$wpgmzaGDPRCompliance</span>-&gt;getConsentPromptHTML(),
</span><span id="222" class="l">            <span class="php-quote">'basic_version'</span>         =&gt; <span class="php-var">$this</span>-&gt;getBasicVersion(),
</span><span id="223" class="l">            <span class="php-quote">'_isProVersion'</span>         =&gt; <span class="php-var">$this</span>-&gt;isProVersion(),
</span><span id="224" class="l">            <span class="php-quote">'is_admin'</span>              =&gt; (is_admin() ? <span class="php-num">1</span> : <span class="php-num">0</span>)
</span><span id="225" class="l">        ));
</span><span id="226" class="l">        
</span><span id="227" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">empty</span>(<span class="php-var">$result</span>-&gt;settings-&gt;wpgmza_settings_ugm_email_address))
</span><span id="228" class="l">            <span class="php-keyword1">unset</span>(<span class="php-var">$result</span>-&gt;settings-&gt;wpgmza_settings_ugm_email_address);
</span><span id="229" class="l">        
</span><span id="230" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$result</span>;
</span><span id="231" class="l">    }
</span><span id="232" class="l">    
</span><span id="233" class="l">    <span class="php-comment">/**
</span></span><span id="234" class="l"><span class="php-comment">     * Returns a string stating the current page, relevant to this plugin.  Please refer to the constants on this class for a list of available pages. If the current page is not relevant to this plugin, NULL is returned.
</span></span><span id="235" class="l"><span class="php-comment">     * @return string|null The current page, where relevant to this plugin, or null
</span></span><span id="236" class="l"><span class="php-comment">     */</span>
</span><span id="237" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> getCurrentPage()
</span><span id="238" class="l">    {
</span><span id="239" class="l">        <span class="php-keyword1">if</span>(!<span class="php-keyword1">isset</span>(<span class="php-var">$_GET</span>[<span class="php-quote">'page'</span>]))
</span><span id="240" class="l">            <span class="php-keyword1">return</span> <span class="php-keyword1">null</span>;
</span><span id="241" class="l">        
</span><span id="242" class="l">        <span class="php-keyword1">switch</span>(<span class="php-var">$_GET</span>[<span class="php-quote">'page'</span>])
</span><span id="243" class="l">        {
</span><span id="244" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu'</span>:
</span><span id="245" class="l">                <span class="php-keyword1">if</span>(<span class="php-keyword1">isset</span>(<span class="php-var">$_GET</span>[<span class="php-quote">'action'</span>]) &amp;&amp; <span class="php-var">$_GET</span>[<span class="php-quote">'action'</span>] == <span class="php-quote">'edit'</span>)
</span><span id="246" class="l">                    <span class="php-keyword1">return</span> Plugin::PAGE_MAP_EDIT;
</span><span id="247" class="l">                
</span><span id="248" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_MAP_LIST;
</span><span id="249" class="l">                <span class="php-keyword1">break</span>;
</span><span id="250" class="l">                
</span><span id="251" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu-settings'</span>:
</span><span id="252" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_SETTINGS;
</span><span id="253" class="l">                <span class="php-keyword1">break</span>;
</span><span id="254" class="l">                
</span><span id="255" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu-support'</span>:
</span><span id="256" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_SUPPORT;
</span><span id="257" class="l">                <span class="php-keyword1">break</span>;
</span><span id="258" class="l">                
</span><span id="259" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu-categories'</span>:
</span><span id="260" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_CATEGORIES;
</span><span id="261" class="l">                <span class="php-keyword1">break</span>;
</span><span id="262" class="l">                
</span><span id="263" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu-advanced'</span>:
</span><span id="264" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_ADVANCED;
</span><span id="265" class="l">                <span class="php-keyword1">break</span>;
</span><span id="266" class="l">                
</span><span id="267" class="l">            <span class="php-keyword1">case</span> <span class="php-quote">'wp-google-maps-menu-custom-fields'</span>:
</span><span id="268" class="l">                <span class="php-keyword1">return</span> Plugin::PAGE_CUSTOM_FIELDS;
</span><span id="269" class="l">                <span class="php-keyword1">break</span>;
</span><span id="270" class="l">        }
</span><span id="271" class="l">        
</span><span id="272" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">null</span>;
</span><span id="273" class="l">    }
</span><span id="274" class="l">    
</span><span id="275" class="l">    <span class="php-comment">/**
</span></span><span id="276" class="l"><span class="php-comment">     * Returns true if we are to be using combined or minified JavaScript
</span></span><span id="277" class="l"><span class="php-comment">     * @return bool True if combined or minified scripts are to be used.
</span></span><span id="278" class="l"><span class="php-comment">     */</span>
</span><span id="279" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> isUsingMinifiedScripts()
</span><span id="280" class="l">    {
</span><span id="281" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;settings-&gt;developer_mode);
</span><span id="282" class="l">    }
</span><span id="283" class="l">    
</span><span id="284" class="l">    <span class="php-comment">/**
</span></span><span id="285" class="l"><span class="php-comment">     * Returns true if the developer mode setting is checked, or if the developer mode cookie is set.
</span></span><span id="286" class="l"><span class="php-comment">     * @return bool True if in developer mode, by setting or by cookie.
</span></span><span id="287" class="l"><span class="php-comment">     */</span>
</span><span id="288" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> isInDeveloperMode()
</span><span id="289" class="l">    {
</span><span id="290" class="l">        <span class="php-keyword1">return</span> !(<span class="php-keyword1">empty</span>(<span class="php-var">$this</span>-&gt;settings-&gt;developer_mode) &amp;&amp; !<span class="php-keyword1">isset</span>(<span class="php-var">$_COOKIE</span>[<span class="php-quote">'wpgmza-developer-mode'</span>]));
</span><span id="291" class="l">    }
</span><span id="292" class="l">    
</span><span id="293" class="l">    <span class="php-comment">/**
</span></span><span id="294" class="l"><span class="php-comment">     * Check whether we are running the Pro add-on.
</span></span><span id="295" class="l"><span class="php-comment">     * @return bool True if the Pro add-on is installed and activated.
</span></span><span id="296" class="l"><span class="php-comment">     */</span>
</span><span id="297" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> isProVersion()
</span><span id="298" class="l">    {
</span><span id="299" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="300" class="l">    }
</span><span id="301" class="l">    
</span><span id="302" class="l">    <span class="php-comment">/**
</span></span><span id="303" class="l"><span class="php-comment">     * Returns the plugin version, based on the plugin comment header. This value will be cached if it hasn't been read already.
</span></span><span id="304" class="l"><span class="php-comment">     * @return string The version string.
</span></span><span id="305" class="l"><span class="php-comment">     */</span>
</span><span id="306" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> getBasicVersion()
</span><span id="307" class="l">    {
</span><span id="308" class="l">        <span class="php-keyword1">if</span>(<span class="php-var">$this</span>-&gt;cachedVersion != <span class="php-keyword1">null</span>)
</span><span id="309" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;cachedVersion;
</span><span id="310" class="l">        
</span><span id="311" class="l">        <span class="php-var">$subject</span> = <span class="php-keyword2">file_get_contents</span>(plugin_dir_path(__DIR__) . <span class="php-quote">'wpGoogleMaps.php'</span>);
</span><span id="312" class="l">        <span class="php-keyword1">if</span>(<span class="php-keyword2">preg_match</span>(<span class="php-quote">'/Version:\s*(.+)/'</span>, <span class="php-var">$subject</span>, <span class="php-var">$m</span>))
</span><span id="313" class="l">            <span class="php-var">$this</span>-&gt;cachedVersion = <span class="php-keyword2">trim</span>(<span class="php-var">$m</span>[<span class="php-num">1</span>]);
</span><span id="314" class="l">        
</span><span id="315" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;cachedVersion;
</span><span id="316" class="l">    }
</span><span id="317" class="l">    
</span><span id="318" class="l">    <span class="php-comment">/**
</span></span><span id="319" class="l"><span class="php-comment">     * Hooks into load_textdomain_mofile, this function is used to override the WordPress repo translations and force the translations bundled with our plugin to be used. These are more complete and accurate than the WordPress community translations.
</span></span><span id="320" class="l"><span class="php-comment">     * @param string $mofile Path to the .mo file in question.
</span></span><span id="321" class="l"><span class="php-comment">     * @param string $domain The text domain
</span></span><span id="322" class="l"><span class="php-comment">     * @return string 
</span></span><span id="323" class="l"><span class="php-comment">     */</span>
</span><span id="324" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> onLoadTextDomainMOFile(<span class="php-var">$mofile</span>, <span class="php-var">$domain</span>)
</span><span id="325" class="l">    {
</span><span id="326" class="l">        <span class="php-keyword1">if</span>(<span class="php-var">$domain</span> == <span class="php-quote">'wp-google-maps'</span>)
</span><span id="327" class="l">            <span class="php-var">$mofile</span> = plugin_dir_path(__DIR__) . <span class="php-quote">'languages/wp-google-maps-'</span> . get_locale() . <span class="php-quote">'.mo'</span>;
</span><span id="328" class="l">        
</span><span id="329" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$mofile</span>;
</span><span id="330" class="l">    }
</span><span id="331" class="l">}
</span><span id="332" class="l">
</span><span id="333" class="l"><span class="php-comment">/** 
</span></span><span id="334" class="l"><span class="php-comment"> * The Factory class will take over this functionality from 7.11.00 onwards. Do not use this hook. 
</span></span><span id="335" class="l"><span class="php-comment"> * @deprecated 
</span></span><span id="336" class="l"><span class="php-comment"> */</span>
</span><span id="337" class="l"><span class="php-keyword1">function</span> create_plugin_instance()
</span><span id="338" class="l">{
</span><span id="339" class="l">    <span class="php-keyword1">if</span>(<span class="php-keyword2">defined</span>(<span class="php-quote">'WPGMZA_PRO_VERSION'</span>))
</span><span id="340" class="l">        <span class="php-keyword1">return</span> <span class="php-keyword1">new</span> ProPlugin();
</span><span id="341" class="l">    
</span><span id="342" class="l">    <span class="php-keyword1">return</span> <span class="php-keyword1">new</span> Plugin();
</span><span id="343" class="l">}
</span><span id="344" class="l">
</span><span id="345" class="l">add_action(<span class="php-quote">'plugins_loaded'</span>, <span class="php-keyword1">function</span>() {
</span><span id="346" class="l">    <span class="php-keyword1">global</span> <span class="php-var">$wpgmza</span>;
</span><span id="347" class="l">    add_filter(<span class="php-quote">'wpgmza_create_plugin_instance'</span>, <span class="php-quote">'WPGMZA\\create_plugin_instance'</span>, <span class="php-num">10</span>, <span class="php-num">0</span>);
</span><span id="348" class="l">    <span class="php-var">$wpgmza</span> = apply_filters(<span class="php-quote">'wpgmza_create_plugin_instance'</span>, <span class="php-keyword1">null</span>);
</span><span id="349" class="l">});
</span><span id="350" class="l"></span></code></pre>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?9005ddd327909d645085dd7bac93b7bd3400af19"></script>
<script src="elementlist.js?fc133bc268158d5398e0205f6ec79065900bb862"></script>
</body>
</html>
